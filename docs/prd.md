# 커피 주문 앱

## 1. 프로젝트 개요

### 1.1. 프로젝트 명
커피 주문 앱

### 1.2. 프로젝트 목적
사용자가 커피 메뉴를 주문하고, 관리자가 주문을 관리할 수 있는 간단한 풀스택 웹 앱

### 1.3. 개발 범위
- 주문하기 화면(메뉴 선택 및 장바구니 기능)
- 관리자 화면(재고 관리 및 주문 상태 관리)
- 데이터를 생성/조회/수정/삭제할 수 있는 기능

## 2. 기술 스택
- 프론트 앤드: HTML, CSS, 리액트, 자바스크립트
- 백앤드: Node.js, Express
- 데이터베이스: PostgreSQL

## 3. 기본 사항
- 프런트앤드와 백엔드 따로 개발
- 기본적인 웹 기술만 사용
- 학습 목적이므로 사용자 인증이나 결제 기능은 제외
- 메뉴는 커피 메뉴만 있음

## 4. 주문하기 화면 상세 명세

### 4.1. 화면 개요
사용자가 커피 메뉴를 선택하고, 옵션을 커스터마이징하여 장바구니에 담고 주문할 수 있는 화면입니다.

### 4.2. 레이아웃 구조
화면은 크게 3개의 영역으로 구성됩니다:
1. **헤더 영역**: 상단 고정
2. **메뉴 아이템 영역**: 중앙 영역
3. **장바구니 영역**: 하단 고정

### 4.3. 헤더 영역

#### 4.3.1. 구성 요소
- **브랜드 로고**: 좌측 상단에 "COZY" 텍스트가 들어간 어두운 초록색 박스
- **주문하기 버튼**: 우측 상단에 위치한 버튼 (현재 화면이므로 비활성화 또는 강조 표시)
- **관리자 버튼**: 우측 상단에 위치한 버튼 (관리자 화면으로 이동)

#### 4.3.2. 기능 요구사항
- 관리자 버튼 클릭 시 관리자 화면으로 이동
- 헤더는 스크롤 시에도 상단에 고정되어 항상 보여야 함

### 4.4. 메뉴 아이템 영역

#### 4.4.1. 메뉴 카드 구조
각 메뉴 아이템은 카드 형태로 표시되며, 다음 요소들을 포함합니다:

1. **메뉴 이미지**
   - 상단에 위치한 이미지 영역
   - 이미지가 없는 경우 플레이스홀더 표시

2. **메뉴 정보**
   - **메뉴 이름**: 메뉴의 이름 (예: "아메리카노(ICE)", "아메리카노(HOT)", "카페라떼")
   - **가격**: 원화 표기 (예: "4,000원", "5,000원")
   - **설명**: 메뉴에 대한 간단한 설명 텍스트

3. **커스터마이징 옵션**
   - 체크박스 형태의 옵션들
   - 각 옵션은 이름과 추가 가격을 표시 (예: "샷 추가 (+500원)", "시럽 추가 (+0원)")
   - 옵션 선택 시 해당 옵션이 활성화됨
   - 여러 옵션을 동시에 선택 가능

4. **담기 버튼**
   - 카드 하단에 위치한 회색 버튼
   - 클릭 시 선택된 옵션과 함께 장바구니에 추가

#### 4.4.2. 기능 요구사항
- 메뉴 목록은 백엔드 API를 통해 동적으로 로드
- 메뉴 카드는 반응형 레이아웃으로 여러 개가 가로로 배치됨
- 옵션 선택 여부에 따라 장바구니에 추가될 때의 가격이 달라짐
- 같은 메뉴에 다른 옵션을 선택하여 여러 번 담을 수 있음

#### 4.4.3. 데이터 구조 예시
```javascript
{
  id: 1,
  name: "아메리카노(ICE)",
  price: 4000,
  description: "간단한 설명...",
  image: "image_url",
  options: [
    { id: 1, name: "샷 추가", price: 500 },
    { id: 2, name: "시럽 추가", price: 0 }
  ]
}
```

### 4.5. 장바구니 영역

#### 4.5.1. 구성 요소
- **장바구니 제목**: "장바구니" 텍스트
- **주문 목록**: 장바구니에 담긴 아이템들의 목록
- **총 금액**: 선택한 모든 아이템의 합계 금액
- **주문하기 버튼**: 주문을 완료하는 버튼

#### 4.5.2. 주문 목록 표시 형식
각 주문 아이템은 다음 형식으로 표시됩니다:
- **아이템 표시**: "메뉴명 (선택된 옵션들) X 수량"
- **가격 표시**: 해당 아이템의 총 가격 (기본 가격 + 옵션 가격) × 수량

예시:
- "아메리카노(ICE) (샷 추가) X 1" - 4,500원
- "아메리카노(HOT) X 2" - 8,000원

#### 4.5.3. 기능 요구사항
- 장바구니에 아이템이 추가되면 하단 장바구니 영역에 즉시 반영
- 같은 메뉴와 같은 옵션 조합이 추가되면 수량이 증가
- 총 금액은 모든 아이템의 가격 합계를 실시간으로 계산하여 표시
- 장바구니가 비어있을 때는 빈 상태 메시지 표시
- 주문하기 버튼 클릭 시 주문이 완료되고 장바구니가 비워짐
- 장바구니는 스크롤 시에도 하단에 고정되어 항상 보여야 함

#### 4.5.4. 장바구니 데이터 구조 예시
```javascript
[
  {
    menuId: 1,
    menuName: "아메리카노(ICE)",
    basePrice: 4000,
    selectedOptions: [
      { id: 1, name: "샷 추가", price: 500 }
    ],
    quantity: 1,
    totalPrice: 4500
  },
  {
    menuId: 2,
    menuName: "아메리카노(HOT)",
    basePrice: 4000,
    selectedOptions: [],
    quantity: 2,
    totalPrice: 8000
  }
]
```

### 4.6. 사용자 인터랙션 플로우

#### 4.6.1. 메뉴 주문 플로우
1. 사용자가 메뉴 카드에서 원하는 옵션을 선택 (선택 사항)
2. "담기" 버튼 클릭
3. 선택된 메뉴와 옵션이 장바구니에 추가됨
4. 장바구니 영역에 아이템이 표시되고 총 금액이 업데이트됨
5. 필요 시 추가 메뉴를 선택하여 장바구니에 담을 수 있음
6. "주문하기" 버튼 클릭하여 주문 완료

#### 4.6.2. 예외 처리
- 장바구니가 비어있을 때 주문하기 버튼은 비활성화 또는 클릭 불가
- 네트워크 오류 시 사용자에게 알림 표시
- 메뉴 로딩 실패 시 에러 메시지 표시

### 4.7. UI/UX 요구사항

#### 4.7.1. 디자인 가이드라인
- 전체적으로 깔끔하고 미니멀한 디자인
- 배경은 흰색, 텍스트는 진한 회색
- 브랜드 컬러로 어두운 초록색 사용 (COZY 로고)
- 버튼은 회색 계열 사용

#### 4.7.2. 반응형 디자인
- 데스크톱, 태블릿, 모바일 환경에서 모두 사용 가능
- 메뉴 카드는 화면 크기에 따라 가로로 여러 개 배치 (그리드 레이아웃)
- 모바일에서는 세로 스크롤 가능

#### 4.7.3. 사용성
- 버튼 클릭 시 시각적 피드백 제공 (호버 효과, 클릭 효과)
- 옵션 선택 시 체크박스 상태가 명확하게 표시
- 장바구니에 아이템이 추가될 때 시각적 피드백 (애니메이션 등)
- 총 금액은 눈에 띄게 강조 표시 (굵은 글씨 등)

### 4.8. API 요구사항

#### 4.8.1. 필요한 API 엔드포인트
- `GET /api/menus`: 메뉴 목록 조회
- `POST /api/orders`: 주문 생성

#### 4.8.2. API 요청/응답 예시

**메뉴 목록 조회**
```
GET /api/menus

Response:
{
  menus: [
    {
      id: 1,
      name: "아메리카노(ICE)",
      price: 4000,
      description: "간단한 설명...",
      image: "image_url",
      options: [
        { id: 1, name: "샷 추가", price: 500 },
        { id: 2, name: "시럽 추가", price: 0 }
      ]
    },
    ...
  ]
}
```

**주문 생성**
```
POST /api/orders

Request Body:
{
  items: [
    {
      menuId: 1,
      selectedOptions: [1],
      quantity: 1
    },
    {
      menuId: 2,
      selectedOptions: [],
      quantity: 2
    }
  ],
  totalPrice: 12500
}

Response:
{
  orderId: 123,
  message: "주문이 완료되었습니다."
}
```

## 6. 백엔드 개발 PRD

### 6.1. 데이터 모델

#### 6.1.1. menus
- 커피 이름
- 설명
- 가격
- 이미지
- 재고 수량

#### 6.1.2. options
- 옵션 이름
- 옵션 가격
- 연결할 메뉴

#### 6.1.3. orders
- 주문 일시
- 주문 내용 (메뉴, 수량, 옵션, 금액)
- 주문 상태 (기본값: 주문 접수)

### 6.2. 데이터 스키마를 위한 사용자 흐름

1. `menus`에 있는 내용을 가져와 브라우저 화면에 표시합니다.
   - `menus` 정보 중 재고 수량은 관리자 화면에 표시합니다.
2. 사용자가 앱 화면에서 커피 메뉴를 선택하여 담고, 선택 정보는 장바구니에 표시됩니다.
3. 장바구니에서 `주문하기` 버튼을 클릭하면 주문 정보를 `orders`에 저장합니다.
   - `orders`에는 주문 시간과 주문 내용(메뉴, 수량, 옵션, 금액)을 담습니다.
4. `orders`에 있는 정보를 관리자 화면의 `주문 현황`에 표시합니다.
   - 주문의 기본 상태는 `주문 접수`입니다.
   - 상태 전환: `주문 접수` → `제조 중` → `완료`

### 6.3. API 설계

#### 6.3.1. 메뉴 목록 조회
- **기능**: 주문하기 메뉴를 클릭하면 데이터베이스에서 커피 메뉴 목록을 불러옵니다.
- **Endpoint**: `GET /api/menus`
- **Response 예시**
```
{
  menus: [
    {
      id: 1,
      name: "아메리카노(ICE)",
      description: "간단한 설명...",
      price: 4000,
      image: "image_url",
      stock: 10,
      options: [
        { id: 1, name: "샷 추가", price: 500 },
        { id: 2, name: "시럽 추가", price: 0 }
      ]
    }
  ]
}
```

#### 6.3.2. 주문 생성
- **기능**: 사용자가 커피를 선택하고 주문하기 버튼을 클릭하면 주문 정보를 저장합니다.
- **Endpoint**: `POST /api/orders`
- **Request Body 예시**
```
{
  items: [
    { menuId: 1, selectedOptions: [1], quantity: 1 },
    { menuId: 2, selectedOptions: [], quantity: 2 }
  ],
  totalPrice: 12500
}
```
- **Response 예시**
```
{
  orderId: 123,
  status: "주문 접수",
  message: "주문이 완료되었습니다."
}
```

#### 6.3.3. 재고 갱신
- **기능**: 주문 정보에 따라 메뉴 목록의 재고를 수정합니다.
- **동작**: 주문 생성 시 각 메뉴의 수량만큼 `menus.stock` 차감

#### 6.3.4. 주문 조회
- **기능**: 주문 ID를 전달하면 해당 주문 정보를 조회합니다.
- **Endpoint**: `GET /api/orders/:orderId`
- **Response 예시**
```
{
  id: 123,
  orderTime: "2024-07-31T13:00:00",
  status: "제조 중",
  items: [
    {
      menuId: 1,
      menuName: "아메리카노(ICE)",
      quantity: 1,
      selectedOptions: [
        { id: 1, name: "샷 추가", price: 500 }
      ],
      price: 4500
    }
  ],
  totalPrice: 4500
}
```
